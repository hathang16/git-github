# hello git

## git이란?

- 형상 관리 시스템(Verson Control System) 의 한 종류
- 주로 개발자들이 프로그램과 관련된 파일을 저장하는데 사용

## git 명령어 요약

- clone : 원격 저장소(github)를 내 컴퓨터에 복사해 옴.
- add : 내 컴퓨터에서 작업한 파일을 스테이지 영역에 추가 함.
- commit : 세이브, 스테이지 영역의 파일들을 가지고 커밋(=세이브)를 만들수 있음. 
    - 스테이지에 올라온 파일을 가지고 컴퓨터에 저장
- push : 원격 저장소에 커밋을 업로드

## 파일의 내용 되돌리기

- 특정 파일의 내용을 마지막 커밋으로 돌리고 싶다면 해당 파일 선택 후 '코드 뭉치 버리기(SourceTree 기능)' 선택

## 브랜치 변경하기

- 브랜치(branch) : 기존 내용을 유지한 체 새로운 내용을 추가하고 싶을 때 사용
- 병합(merge): 한 브랜치의 내용을 다른 브랜치에 반영
- 체크아웃(checkout) : 특정 브랜치(혹은 커밋)으로 되돌아가고 싶을 때 사용
- sourceTree의 체크아웃 : 브랜치 이름을 더블 클릭하는 것만으로 체크아웃 가능

## 병합하기 1

- 헤드 브랜치에 변경사항이 없고
- 병합 대상 브랜치가 헤드로부터 시작된 경우
- 아주 쉽게 병합 가능 = Fast-forward

## 병합하기 2

- 헤드 브랜치에 추가적인 커밋이 생기는 경우
- 진짜 병합이 필요해짐
- 충돌이 일어 나지 않으면 👍🏻, 충돌이 일어 나도 걱정 ❌

### 해야할 것

- 불필요한한 브랜치 삭제 
    - 현재 브랜치가 아닌 경우 간단하게 삭제 가능
    - 브랜치를 삭제했을 경우 사라지는 커밋이 있는지 없는지 확인하기
    
- git pull
    - 서버의 내용이 최신일 경우 pull 적용
    - 충돌이 일어 날수 있음
    - pull = fetch + merge

## 충돌 해결하기

- 중요한 것 : 겁내지 않기!!
- 충돌의 발생 원인
    - 자동 병합을 실패했을 경우
    - 같은 파일을 병합 대상 두 커밋에 동시 수정했을 경우 충돌이 날 확률이 높음

- 해결 방법
    - 에디터 사용 : 충돌난 파일을 꼼꼼히 읽어가며 수동으로 수정
    - SourceTree를 사용 : 내것 또는 저장소것 선택하기

- 충돌을 해결했음에도 이상할 경우 : reset을 이용해 되돌리기


## 커밋 되돌리기

### reset 사용하기

- 방법
    - `git reset --hard` 에 해당하는 명령으로 커밋을 되돌리기
    - reset 이후 push는 force 옵션을 선택해야 함
    - 이전 커밋은 날아감

- 장점 : 쉬움
- 단점 : 커밋이 날아감 / 강제 푸시 필요
- SourceTree에서는 강제푸시 지원 ❌

### 브랜치 만들어서 되돌리기 (추천👍🏻)

- 방법
    - 되돌릴 커밋 대상으로 브랜치 생성
    - 체크아웃
    - 수정 후 master(혹은 main)에 병합(merge)

- 장점 : 쉬움 / 기록이 남아있음
- 단점 : 트리가 지저분해짐
- reset과는 달리 내용이 사라지지 않음

### revert 사용하기

- 방법
    - 대상 커밋을 HEAD커밋의 자식으로 새로 생성함
    - SourceTree에서는 커밋선택 - 우클릭 - 커밋 되돌리기

- 장점 : 가장 정석적 / 이전 커밋이 남아있음
- 단점 : 충돌이 날 가능성이 있음 / 어려움
- reset과 달리 revert 대상 커밋은 사라지지 않음
- revert로 여러 커밋을 되돌리려면?
    - 최신 순서대로 revert 반복 적용

## 커밋 덮어쓰기기

### 브랜치 체크아웃시 주의사항

- 브랜치를 만들고 체크아웃을 하려면 현재 작업디렉토리가 깨끗해야 함  
- 변경사항이 있을 경우 다른 브랜치로 체크아웃 ❌  

#### 체크아웃이 갑자기 필요한 상황이라면?

##### 작업 중인 내용 임시 저장
1. 브랜치1에서 임시 커밋하기  
2. 브랜치2로 체크아웃하고 할 일 하기  
3. 다시 브랜치1로 돌아가기  
4. 1의 작업을 이어서 마무리하기  
5. 커밋 덮어쓰기(`commit --amend`) 하기  
6. 필요하다면 `push --force` 하기  

##### Stash 사용
1. stash 만들기  
2. 새로운 파일이 있을 경우 우선 인덱스 추가  
3. 체크아웃 후 되돌아오기  
4. stash를 pop하기  
5. 보통 커밋을 새로 생성하기